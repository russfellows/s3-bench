# Multi-size test config for validating size-bucketed histograms
duration: 10s
concurrency: 4
target: "file:///tmp/io-bench-multisize/"

prepare:
  ensure_objects:
    - base_uri: "file:///tmp/io-bench-multisize/small/"
      count: 100
      min_size: 1024
      max_size: 1024
      fill: zero
    - base_uri: "file:///tmp/io-bench-multisize/medium/"
      count: 50
      min_size: 131072
      max_size: 131072
      fill: zero
    - base_uri: "file:///tmp/io-bench-multisize/large/"
      count: 20
      min_size: 2097152
      max_size: 2097152
      fill: zero
    - base_uri: "file:///tmp/io-bench-multisize/xlarge/"
      count: 10
      min_size: 16777216
      max_size: 16777216
      fill: zero
  cleanup: true

workload:
  - weight: 10
    op: put
    path: "small/"
    object_size: 1024  # 1 KB - bucket 1
    
  - weight: 10
    op: put
    path: "medium/"
    object_size: 131072  # 128 KB - bucket 3
    
  - weight: 10
    op: put
    path: "large/"
    object_size: 2097152  # 2 MB - bucket 4
    
  - weight: 10
    op: put
    path: "xlarge/"
    object_size: 16777216  # 16 MB - bucket 5
    
  - weight: 15
    op: get
    path: "small/*"
    
  - weight: 15
    op: get
    path: "medium/*"
    
  - weight: 15
    op: get
    path: "large/*"
    
  - weight: 15
    op: get
    path: "xlarge/*"
