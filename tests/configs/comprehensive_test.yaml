# Comprehensive test: All operation types with varied sizes
# Tests: GET, PUT, DELETE, STAT, LIST with multiple size distributions

target: "file:///tmp/sai3bench-comprehensive/"

duration: 15s
concurrency: 16

prepare:
  ensure_objects:
    # Small objects (4 KiB) - 100 objects
    - base_uri: "file:///tmp/sai3bench-comprehensive/small/"
      count: 100
      size_spec: 4096  # 4 KiB
      fill: random
    
    # Medium objects (256 KiB) - 50 objects
    - base_uri: "file:///tmp/sai3bench-comprehensive/medium/"
      count: 50
      size_spec: 262144  # 256 KiB
      fill: random
    
    # Large objects (4 MiB) - 20 objects
    - base_uri: "file:///tmp/sai3bench-comprehensive/large/"
      count: 20
      size_spec: 4194304  # 4 MiB
      fill: random
    
    # Extra large objects (16 MiB) - 10 objects
    - base_uri: "file:///tmp/sai3bench-comprehensive/xlarge/"
      count: 10
      size_spec: 16777216  # 16 MiB
      fill: random
  
  post_prepare_delay: 0

workload:
  # GET operations - mixed sizes
  - op: get
    path: "small/prepared-*.dat"
    weight: 40
  
  - op: get
    path: "medium/prepared-*.dat"
    weight: 20
  
  - op: get
    path: "large/prepared-*.dat"
    weight: 10
  
  - op: get
    path: "xlarge/prepared-*.dat"
    weight: 5
  
  # PUT operations - dynamic sizes using size distributions
  - op: put
    path: "uploads/"
    weight: 15
    size_distribution:
      type: lognormal
      mean: 65536      # 64 KiB mean
      std_dev: 32768   # 32 KiB std dev
      min: 1024        # 1 KiB min
      max: 1048576     # 1 MiB max
    concurrency: 8
  
  # DELETE operations - consume from deletable pool
  - op: delete
    path: "small/prepared-*.dat"
    weight: 5
  
  - op: delete
    path: "medium/prepared-*.dat"
    weight: 3
  
  # STAT operations - check metadata
  - op: stat
    path: "small/prepared-*.dat"
    weight: 15
  
  - op: stat
    path: "large/prepared-*.dat"
    weight: 5
  
  # LIST operations - directory listings
  - op: list
    path: "small/"
    weight: 8
  
  - op: list
    path: "medium/"
    weight: 4
  
  - op: list
    path: "large/"
    weight: 2
