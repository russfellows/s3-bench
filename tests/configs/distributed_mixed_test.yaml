# Distributed mixed workload test - multiple operations and sizes
# Tests histogram merging across GET/PUT/META operations with varied object sizes

target: "file:///tmp/sai3bench-test/"
duration: 3s
concurrency: 16

prepare:
  ensure_objects:
    - base_uri: "file:///tmp/sai3bench-test/mixed/"
      count: 100
      min_size: 1024
      max_size: 1024  # 1KB objects
      fill: zero
    - base_uri: "file:///tmp/sai3bench-test/mixed/"
      count: 50
      min_size: 131072
      max_size: 131072  # 128KB objects
      fill: zero
    - base_uri: "file:///tmp/sai3bench-test/mixed/"
      count: 30
      min_size: 1048576
      max_size: 1048576  # 1MB objects
      fill: zero

workload:
    # GET operations across multiple size buckets
    - op: get
      path: "mixed/*"
      weight: 40
    
    # PUT operations with varied sizes
    - op: put
      path: "mixed/"
      weight: 30
      size_distribution:
        type: uniform
        min: 1024
        max: 65536  # 1KB to 64KB
    
    # META operations (LIST)
    - op: list
      path: "mixed/"
      weight: 20
    
    # DELETE and re-PUT cycle
    - op: delete
      path: "mixed/*"
      weight: 10
